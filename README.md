# API –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- FastAPI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.
- Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ fastapi-users –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
- –í–Ω–µ—à–Ω–∏–π API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–º–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é requests.
- –ú–æ–¥—É–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º pytest.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º environs.
- HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å CSS –∏ JavaScript –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- Jinja –¥–ª—è —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–∏ HTML —Å—Ç—Ä–∞–Ω–∏—Ü.
- –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º uvicorn.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ üîß

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ.
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ `requirements.txt`.
  ```shell
  pip install -r requirements.txt
  ```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ä–µ–¥—ã
- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ env.dev –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
    ```
    DB_HOST=
    DB_PORT=
    DB_NAME=
    DB_USER=
    DB_PASS=
    
    CURRENCY_API_KEY=your_api_key
    SECRET_KEY=your_secret_key
    ```

### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:8000`.
  ```shell
  uvicorn main:app --reload
  ```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –ø–∞–ø–∫–∏ `tests` —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `pytest`.

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ API

- **–í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞:**
    ```shell
    curl -X POST 'http://127.0.0.1:8000/auth/jwt/login/' --header 'content-type: application/x-www-form-urlencoded' --form 'username="user"' --form 'password="pass"''
    ```

- **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç –∏ –∏—Ö –∫–æ–¥–æ–≤ (–≤–∞–ª–∏–¥–Ω—ã–π JWT-—Ç–æ–∫–µ–Ω):**
    ```shell
    curl -X GET 'http://127.0.0.1:8000/currency/get_list/' --header 'Cookie: access_token="Bearer your_jwt_token"'  
    ```

- **–û–±–º–µ–Ω –≤–∞–ª—é—Ç—ã (–≤–∞–ª–∏–¥–Ω—ã–π JWT-—Ç–æ–∫–µ–Ω):**
    ```shell
    curl -X GET 'http://127.0.0.1:8000/currency/exchange/?base=usd&quote=rub&amount=1000' --header 'Cookie: access_token="Bearer your_jwt_token"'  
    ```

## –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ API

- **–°–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç:**
    ```json
    {
        "AED": "United Arab Emirates Dirham",
        "AFN": "Afghan Afghani",
        "ALL": "Albanian Lek",
        ...
    }
    ```
- **–£—Å–ø–µ—à–Ω—ã–π –æ–±–º–µ–Ω –≤–∞–ª—é—Ç—ã:**
    ```json
    {
        "success": true,
        "query": {
            "from": "USD",
            "to": "RUB",
            "amount": 1000
        },
        "info": {
            "timestamp": 1700419983,
            "quote": 89.350433
        },
        "result": 89350.433
    }
    ```

## HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

![pic1](https://github.com/egorzhmaev/FastAPIcurrency/blob/master/2024-04-09_23-27-42.png)
